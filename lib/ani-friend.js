!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("ani-friend",[],t):"object"==typeof exports?exports["ani-friend"]=t():e["ani-friend"]=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=3)}([function(e,t){e.exports=require("gsap/TweenMax")},function(e,t){e.exports=require("element-closest")},function(e,t){e.exports=require("@babel/polyfill/noConflict")},function(e,t,i){"use strict";i.r(t);i(2);var n=i(1),a=i.n(n),r=i(0),o={initialDelay:.1,delaySpeed:.2,moveDistance:40,zoomScale:1.6,inViewTriggerPercent:.2,speed:1,ease:"Power2.easeOut",textLineDelaySpeed:.1,textLineYOffset:0},s={getAttribute:function(e,t){return e.hasAttribute(t)?e.getAttribute(t):!!e.hasAttribute("data-".concat(t))&&e.getAttribute("data-".concat(t))},hasAttribute:function(e,t){return!(!e.hasAttribute(t)&&!e.hasAttribute("data-".concat(t)))},wrapLines:function(e){var t=e.innerText.split(" "),i="";i+="<span>"+t.join(" </span><span>")+" </span> ",e.innerHTML=i;i="";var n=null;e.querySelectorAll("span").forEach(function(e){null===n&&(n=e.offsetTop,i='<span class="ani-line"><span class="ani-line-group">'),n<e.offsetTop&&(i+='</span></span><span class="ani-line"><span class="ani-line-group">',n=e.offsetTop),i+=e.innerText+" "}),i+="</span>",e.innerHTML=i}};function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=function(){function e(t,i,n,a){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.index=i,this.completeHandler=a,this.delaySpeed=o.delaySpeed,s.hasAttribute(this.el,"ani-delay-speed")&&(this.delaySpeed=parseFloat(s.getAttribute(this.el,"ani-delay-speed"))),this.movement=o.moveDistance,s.hasAttribute(this.el,"ani-move-distance")&&(this.movement=parseFloat(s.getAttribute(this.el,"ani-move-distance"))),this.zoomScale=o.zoomScale,s.hasAttribute(this.el,"ani-zoom-scale")&&(this.zoomScale=parseFloat(s.getAttribute(this.el,"ani-zoom-scale"))),this.speed=o.speed,s.hasAttribute(this.el,"ani-speed")&&(this.speed=parseFloat(s.getAttribute(this.el,"ani-speed"))),this.ease=window.EaseLookup.find(o.ease),s.hasAttribute(this.el,"ani-ease")){var r=window.EaseLookup.find(s.getAttribute(this.el,"ani-ease"));r&&(this.ease=r)}this.textLineDelaySpeed=o.textLineDelaySpeed,s.hasAttribute(this.el,"ani-text-line-delay-speed")&&(this.textLineDelaySpeed=parseFloat(o.textLineDelaySpeed)),this.textLineYOffset=o.textLineYOffset,s.hasAttribute(this.el,"ani-text-line-y-offset")&&(this.textLineYOffset=parseFloat(o.textLineYOffset)),this.preset=n&&"string"==typeof n&&""!==n?n:"fade"}var t,i,n;return t=e,(i=[{key:"appear",value:function(){var e=this.preset.split("-"),t=e.shift(),i=e.join("-");"wipe"===t?this.wipe(i):"zoom"===t?this.zoom(i):"class"===t&&i?this.addClass(i):"text"===t?this.text(i):this.fade(i)}},{key:"fade",value:function(e){var t={x:0,y:0,opacity:0};if("string"==typeof e)switch(e){case"left":t.x=this.movement;break;case"right":t.x=-this.movement;break;case"down":t.y=-this.movement;break;case"up":t.y=this.movement;break;default:t.y=0}r.TweenMax.fromTo(this.el,this.speed,t,{opacity:1,y:0,x:0,ease:this.ease,delay:this.index*this.delaySpeed,onComplete:this.completeHandler,clearProps:"x,y,opacity"})}},{key:"wipe",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"left",t=this.clipPath(100),i=this.clipPath(0);switch(e){case"up":t=this.clipPath(500,0,0,0),i=this.clipPath(0,0,0,0);break;case"down":t=this.clipPath(0,0,500,0),i=this.clipPath(0,0,0,0);break;case"left":t=this.clipPath(0,0,0,500),i=this.clipPath(0,0,0,0);break;case"right":default:t=this.clipPath(0,500,0),i=this.clipPath(0,0,0)}i.delay=this.index*this.delaySpeed,i.ease=this.ease,i.onComplete=this.completeHandler,r.TweenMax.fromTo(this.el,this.speed,t,i)}},{key:"zoom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"in",t=this.el.parentElement;t.style.overflow="hidden","inline"===getComputedStyle(this.el,null).display?t.style.display="inline-block":t.style.display=getComputedStyle(this.el,null).display,"out"===e?r.TweenMax.fromTo(this.el,this.speed,{opacity:0,scale:1},{opacity:1,scale:this.zoomScale,delay:this.index*this.delaySpeed,onComplete:this.completeHandler,ease:this.ease,clearProps:"opacity"}):r.TweenMax.fromTo(this.el,this.speed,{opacity:0,scale:this.zoomScale},{opacity:1,scale:1,delay:this.index*this.delaySpeed,onComplete:this.completeHandler,ease:this.ease,clearProps:"opacity, scale"})}},{key:"text",value:function(e){var t=this,i=this.el.innerHTML;s.wrapLines(this.el);var n=this.el.querySelectorAll(".ani-line"),a=this.speed/n.length+1,o=this.index*this.delaySpeed;n.forEach(function(s,l){var c=0,d=s.querySelector(".ani-line-group");s.style.display="block","line-mask"===e&&(s.style.overflow="hidden",c=1),d.style.display="inline-block";r.TweenMax.fromTo(d,a,{y:d.offsetHeight+t.textLineYOffset,opacity:c},{opacity:1,y:0,x:0,ease:t.ease,delay:o+l*t.textLineDelaySpeed,onComplete:function(e){e===n.length-1&&(t.el.innerHTML=i,t.completeHandler())},onCompleteParams:[l],clearProps:"all"})})}},{key:"clipPath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return{clipPath:"inset(".concat(e,"% ").concat(t,"% ").concat(i,"% ").concat(n,"%)"),webkitClipPath:"inset(".concat(e,"% ").concat(t,"% ").concat(i,"% ").concat(n,"%)")}}},{key:"addClass",value:function(e){var t=this;setTimeout(function(){t.el.classList.add(e),t.completeHandler()},this.index*this.delaySpeed)}}])&&l(t.prototype,i),n&&l(t,n),e}(),d={"default-appear":function(e){e.style.opacity=1}};function u(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}d["basic-appear"]=function(e,t){e.style.opacity=1,e.style.transition="none",e.classList.add("ani-has-appeared"),e.classList.add("ani-start");var i=0,n=0,a=function(){++n===i&&(e.classList.remove("ani-start"),e.classList.add("ani-complete"))};t.forEach(function(e,t){var n="";i++,s.hasAttribute(e,"ani-preset")&&(n=s.getAttribute(e,"ani-preset")),new c(e,t,n,a).appear()})};var p=function(){function e(t){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,s.hasAttribute(this.el,"ani-in-view-trigger-percent")?this.offsetPercentage=parseFloat(s.getAttribute(this.el,"ani-in-view-trigger-percent")):this.offsetPercentage=o.inViewTriggerPercent,console.log({inViewTriggerPercent:o.inViewTriggerPercent,offsetPercentage:this.offsetPercentage});var n=t.querySelectorAll("img[load-src], img[data-load-src]");this.images=u(n).filter(function(e){return e.closest("[ani], [data-ani]")===i.el}),this.imageLoadedCount=0,this.hasAppeared=!1;var a=u(this.el.querySelectorAll("[ani-child], [data-ani-child]")).filter(function(e){return e.closest("[ani], [data-ani]")===i.el});this.children=a,this.children.forEach(function(e,t){s.hasAttribute(e,"ani-child-order")?e.order=parseInt(s.getAttribute(e,"ani-child-order")):e.order=i.children.length+t}),this.children.sort(function(e,t){return e.order>t.order?1:-1}),this.onAppear=function(){i.el.classList.add("appear")},s.hasAttribute(t,"ani")&&"function"==typeof d[s.getAttribute(t,"ani")]&&(this.onAppear=d[s.getAttribute(t,"ani")])}var t,i,n;return t=e,(i=[{key:"check",value:function(){this.isInViewport(this.el,window.innerHeight)&&this.loadAssets(),!this.hasAppeared&&this.imageLoadedCount===this.images.length&&this.isInViewport(this.el,window.innerHeight*-this.offsetPercentage)&&this.appear()}},{key:"appear",value:function(){var e=this;this.hasAppeared=!0,setTimeout(function(){e.onAppear(e.el,e.children)},1e3*o.initialDelay)}},{key:"isInViewport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return window.innerHeight+window.scrollY>=document.body.offsetHeight&&(t=0),e.getBoundingClientRect().top-t<(window.innerHeight||document.documentElement.clientHeight)}},{key:"imageLoadHandler",value:function(){this.imageLoadedCount++,this.check()}},{key:"loadAssets",value:function(){var e=this;this.images.forEach(function(t){if(s.hasAttribute(t,"load-src")){var i=s.getAttribute(t,"load-src");t.removeAttribute("load-src"),t.removeAttribute("data-load-src"),t.addEventListener("load",e.imageLoadHandler.bind(e)),t.addEventListener("error",e.imageLoadHandler.bind(e)),t.setAttribute("src",i)}})}}])&&h(t.prototype,i),n&&h(t,n),e}();function f(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var y=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.groups=[],this.update(),window.addEventListener("scroll",function(){t.check()}),this.check()}var t,i,n;return t=e,(i=[{key:"check",value:function(){this.groups.forEach(function(e){e.check()})}},{key:"update",value:function(){var e=this;this.els=document.querySelectorAll("[ani]:not([data-ani-added]), [data-ani]:not([data-ani-added])"),this.els.forEach(function(t){t.setAttribute("data-ani-added",!0),e.groups.push(new p(t))}),this.check()}}])&&f(t.prototype,i),n&&f(t,n),e}();i.d(t,"Ani",function(){return y}),i.d(t,"AniConfig",function(){return o}),i.d(t,"AniElement",function(){return c}),i.d(t,"AniGroupActions",function(){return d}),i.d(t,"AnimationGroup",function(){return p}),i.d(t,"Helpers",function(){return s}),"undefined"!=typeof document&&"undefined"!=typeof window&&(window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),a()(window)),console.log("ani-friend v1.0.4037")}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbmktZnJpZW5kL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9hbmktZnJpZW5kL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2FuaS1mcmllbmQvZXh0ZXJuYWwgXCJnc2FwL1R3ZWVuTWF4XCIiLCJ3ZWJwYWNrOi8vYW5pLWZyaWVuZC9leHRlcm5hbCBcImVsZW1lbnQtY2xvc2VzdFwiIiwid2VicGFjazovL2FuaS1mcmllbmQvZXh0ZXJuYWwgXCJAYmFiZWwvcG9seWZpbGwvbm9Db25mbGljdFwiIiwid2VicGFjazovL2FuaS1mcmllbmQvLi9zcmMvbW9kdWxlcy9BbmlDb25maWcuanMiLCJ3ZWJwYWNrOi8vYW5pLWZyaWVuZC8uL3NyYy9tb2R1bGVzL0hlbHBlcnMuanMiLCJ3ZWJwYWNrOi8vYW5pLWZyaWVuZC8uL3NyYy9tb2R1bGVzL0FuaUVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vYW5pLWZyaWVuZC8uL3NyYy9tb2R1bGVzL0FuaUdyb3VwQWN0aW9ucy5qcyIsIndlYnBhY2s6Ly9hbmktZnJpZW5kLy4vc3JjL21vZHVsZXMvQW5pbWF0aW9uR3JvdXAuanMiLCJ3ZWJwYWNrOi8vYW5pLWZyaWVuZC8uL3NyYy9tb2R1bGVzL0FuaS5qcyIsIndlYnBhY2s6Ly9hbmktZnJpZW5kLy4vc3JjL2luZGV4LmpzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsInNlbGYiLCJ0aGlzIiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsInJlcXVpcmUiLCJBbmlDb25maWciLCJpbml0aWFsRGVsYXkiLCJkZWxheVNwZWVkIiwibW92ZURpc3RhbmNlIiwiem9vbVNjYWxlIiwiaW5WaWV3VHJpZ2dlclBlcmNlbnQiLCJzcGVlZCIsImVhc2UiLCJ0ZXh0TGluZURlbGF5U3BlZWQiLCJ0ZXh0TGluZVlPZmZzZXQiLCJIZWxwZXJzIiwiZ2V0QXR0cmlidXRlIiwiZWwiLCJhdHQiLCJoYXNBdHRyaWJ1dGUiLCJjb25jYXQiLCJ3cmFwTGluZXMiLCIkY29udGFpbmVyIiwid29yZHMiLCJpbm5lclRleHQiLCJzcGxpdCIsInRtcCIsImpvaW4iLCJpbm5lckhUTUwiLCJ0b3AiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsIndvcmQiLCJvZmZzZXRUb3AiLCJBbmlFbGVtZW50IiwiaW5kZXgiLCJwcmVzZXQiLCJjb21wbGV0ZUhhbmRsZXIiLCJfY2xhc3NDYWxsQ2hlY2siLCJwYXJzZUZsb2F0IiwibW92ZW1lbnQiLCJ3aW5kb3ciLCJFYXNlTG9va3VwIiwiZmluZCIsIm1vdGlvbnMiLCJtb3Rpb25OYW1lIiwic2hpZnQiLCJvcHRpb24iLCJ3aXBlIiwiem9vbSIsImFkZENsYXNzIiwidGV4dCIsImZhZGUiLCJkaXJlY3Rpb24iLCJzdGFydFByb3BzIiwieCIsInkiLCJvcGFjaXR5IiwiVHdlZW5NYXgiLCJmcm9tVG8iLCJkZWxheSIsIm9uQ29tcGxldGUiLCJjbGVhclByb3BzIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiY2xpcFBhdGgiLCJlbmRQcm9wcyIsIndyYXBwZXIiLCJwYXJlbnRFbGVtZW50Iiwic3R5bGUiLCJvdmVyZmxvdyIsImdldENvbXB1dGVkU3R5bGUiLCJkaXNwbGF5Iiwic2NhbGUiLCJfdGhpcyIsIm9yaWdpbmFsQ29udGVudCIsImxpbmVzIiwic3RhcnRpbmdEZWxheSIsIml0ZW0iLCJzdGFydGluZ09wYWNpdHkiLCIkZ3JvdXAiLCJxdWVyeVNlbGVjdG9yIiwib2Zmc2V0SGVpZ2h0Iiwib25Db21wbGV0ZVBhcmFtcyIsInJpZ2h0IiwiYm90dG9tIiwibGVmdCIsIndlYmtpdENsaXBQYXRoIiwiX3RoaXMyIiwic2V0VGltZW91dCIsImNsYXNzTGlzdCIsImFkZCIsIkFuaUdyb3VwQWN0aW9ucyIsImRlZmF1bHQtYXBwZWFyIiwiY2hpbGRyZW4iLCJ0cmFuc2l0aW9uIiwiY291bnQiLCJjb21wbGV0ZUNvdW50IiwicmVtb3ZlIiwiYXBwZWFyIiwiQW5pbWF0aW9uR3JvdXAiLCJBbmltYXRpb25Hcm91cF9jbGFzc0NhbGxDaGVjayIsIm9mZnNldFBlcmNlbnRhZ2UiLCJjb25zb2xlIiwibG9nIiwiaW1hZ2VzIiwiX3RvQ29uc3VtYWJsZUFycmF5IiwiZmlsdGVyIiwiY2hpbGQiLCJjbG9zZXN0IiwiaW1hZ2VMb2FkZWRDb3VudCIsImhhc0FwcGVhcmVkIiwiZmlsdGVyZWRDaGlsZHJlbiIsIm9yZGVyIiwicGFyc2VJbnQiLCJzb3J0IiwiYSIsImIiLCJvbkFwcGVhciIsImlzSW5WaWV3cG9ydCIsImlubmVySGVpZ2h0IiwibG9hZEFzc2V0cyIsImVsZW0iLCJwYWRkaW5nIiwic2Nyb2xsWSIsImRvY3VtZW50IiwiYm9keSIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImRvY3VtZW50RWxlbWVudCIsImNsaWVudEhlaWdodCIsImNoZWNrIiwiX3RoaXMzIiwiaW1nIiwic3JjIiwicmVtb3ZlQXR0cmlidXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImltYWdlTG9hZEhhbmRsZXIiLCJzZXRBdHRyaWJ1dGUiLCJBbmkiLCJBbmlfY2xhc3NDYWxsQ2hlY2siLCJncm91cHMiLCJ1cGRhdGUiLCJlbHMiLCJwdXNoIiwiX193ZWJwYWNrX2V4cG9ydHNfXyIsIm1vZHVsZXNfQW5pIiwibW9kdWxlc19BbmlFbGVtZW50IiwibW9k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SyxFQUFBLDhCQUFBNUksSUFBQW5DLEVBQUFRLEVBQUF1SyxFQUFBLCtCQUFBRSxJQUFBakwsRUFBQVEsRUFBQXVLLEVBQUEsb0NBQUFwRCxJQUFBM0gsRUFBQVEsRUFBQXVLLEVBQUEsbUNBQUFHLElBQUFsTCxFQUFBUSxFQUFBdUssRUFBQSw0QkFBQWxJLElBR3dCLG9CQUFiK0csVUFBOEMsb0JBQVhyRixTQUN0Q0EsT0FBTzRHLFdBQWFBLFNBQVNySixVQUFVK0IsVUFDdkNzSCxTQUFTckosVUFBVStCLFFBQVV1SCxNQUFNdEosVUFBVStCLFNBRWpEd0gsSUFBUzlHLFNBV2IrRCxRQUFRQyxJQUFJIiwiZmlsZSI6ImFuaS1mcmllbmQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShcImFuaS1mcmllbmRcIiwgW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiYW5pLWZyaWVuZFwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJhbmktZnJpZW5kXCJdID0gZmFjdG9yeSgpO1xufSkodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHRoaXMsIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAzKTtcbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImdzYXAvVHdlZW5NYXhcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiZWxlbWVudC1jbG9zZXN0XCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIkBiYWJlbC9wb2x5ZmlsbC9ub0NvbmZsaWN0XCIpOyIsImV4cG9ydCBjb25zdCBBbmlDb25maWcgPSB7XG4gICAgaW5pdGlhbERlbGF5OiAwLjEsXG4gICAgLy8gQW4gZWxlbWVudCBhcHBlYXJzIGF0IHRoaXMgdGltZSAqIGl0cyBvcmRlclxuICAgIGRlbGF5U3BlZWQ6IDAuMixcbiAgICBtb3ZlRGlzdGFuY2U6IDQwLFxuICAgIHpvb21TY2FsZTogMS42LFxuICAgIGluVmlld1RyaWdnZXJQZXJjZW50OiAwLjIsXG4gICAgc3BlZWQ6IDEsXG4gICAgZWFzZTogJ1Bvd2VyMi5lYXNlT3V0JyxcbiAgICB0ZXh0TGluZURlbGF5U3BlZWQ6IDAuMSxcbiAgICB0ZXh0TGluZVlPZmZzZXQ6IDAsXG59XG4iLCJleHBvcnQgY29uc3QgSGVscGVycyA9IHtcbiAgICBnZXRBdHRyaWJ1dGU6IGZ1bmN0aW9uKGVsLCBhdHQpIHtcbiAgICAgICAgaWYgKGVsLmhhc0F0dHJpYnV0ZShhdHQpKSB7XG4gICAgICAgICAgICByZXR1cm4gZWwuZ2V0QXR0cmlidXRlKGF0dClcbiAgICAgICAgfSBlbHNlIGlmIChlbC5oYXNBdHRyaWJ1dGUoYGRhdGEtJHthdHR9YCkpIHtcbiAgICAgICAgICAgIHJldHVybiBlbC5nZXRBdHRyaWJ1dGUoYGRhdGEtJHthdHR9YClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9LFxuICAgIGhhc0F0dHJpYnV0ZTogZnVuY3Rpb24oZWwsIGF0dCkge1xuICAgICAgICBpZiAoZWwuaGFzQXR0cmlidXRlKGF0dCkgfHwgZWwuaGFzQXR0cmlidXRlKGBkYXRhLSR7YXR0fWApKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgIH0sXG4gICAgd3JhcExpbmVzOiBmdW5jdGlvbigkY29udGFpbmVyKSB7XG4gICAgICAgIC8vIGdldCB0aGUgdGV4dCBmcm9tIHRoZSBjb25hdGluZXJcbiAgICAgICAgdmFyIHRleHQgPSAkY29udGFpbmVyLmlubmVyVGV4dFxuXG4gICAgICAgIC8vIHNwbGl0IHRoZSB0ZXh0IGludG8gd29yZHNcbiAgICAgICAgdmFyIHdvcmRzID0gdGV4dC5zcGxpdCgnICcpXG5cbiAgICAgICAgLy8gd3JhcCBlYWNoIHdvcmQgaW4gYSBzcGFuIGFuZCBhZGQgaXQgdG8gYSB0bXBcbiAgICAgICAgdmFyIHRtcCA9ICcnXG4gICAgICAgIHRtcCArPSAnPHNwYW4+JyArIHdvcmRzLmpvaW4oJyA8L3NwYW4+PHNwYW4+JykgKyAnIDwvc3Bhbj4gJ1xuXG4gICAgICAgIC8vIHJlbW92ZSB0aGUgdGV4dCBmcm9tIHRoZSBjb250YWluZXIsIGFuZCByZXBsYWNlIGl0IHdpdGggdGhlIHdyYXBwZWQgd29yZHNcbiAgICAgICAgJGNvbnRhaW5lci5pbm5lckhUTUwgPSB0bXBcblxuICAgICAgICAvLyBwcmVwYXJlIHRoZSBvZmZzZXQgdmFyaWFibGUgYW5kIHRtcFxuICAgICAgICB2YXIgdG1wID0gJydcbiAgICAgICAgdmFyIHRvcCA9IG51bGxcbiAgICAgICAgJGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdzcGFuJykuZm9yRWFjaCgod29yZCkgPT4ge1xuICAgICAgICAgICAgLy8gaWYgdGhpcyBpcyB0aGUgZmlyc3QgaXRlcmF0aW9uXG4gICAgICAgICAgICBpZiAodG9wID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgLy8gc2V0IHRoZSB0b3BcbiAgICAgICAgICAgICAgICB0b3AgPSB3b3JkLm9mZnNldFRvcFxuICAgICAgICAgICAgICAgIC8vIG9wZW4gdGhlIGZpcnN0IGxpbmVcbiAgICAgICAgICAgICAgICB0bXAgPSAnPHNwYW4gY2xhc3M9XCJhbmktbGluZVwiPjxzcGFuIGNsYXNzPVwiYW5pLWxpbmUtZ3JvdXBcIj4nXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGlmIHRoaXMgaXMgYSBuZXcgbGluZSAodG9wIGlzIGJpZ2dlciB0aGVuIHRoZSBwcmV2aW91cyB3b3JkKVxuICAgICAgICAgICAgaWYgKHRvcCA8IHdvcmQub2Zmc2V0VG9wKSB7XG4gICAgICAgICAgICAgICAgLy8gY2xvc2UgdGhlIHByZXZpb3VzIGxpbmUgYW5kIHN0YXJ0IGEgbmV3IG9uZVxuICAgICAgICAgICAgICAgIHRtcCArPSAnPC9zcGFuPjwvc3Bhbj48c3BhbiBjbGFzcz1cImFuaS1saW5lXCI+PHNwYW4gY2xhc3M9XCJhbmktbGluZS1ncm91cFwiPidcbiAgICAgICAgICAgICAgICAvLyBjaGFuZ2UgdGhlIHRvcFxuICAgICAgICAgICAgICAgIHRvcCA9IHdvcmQub2Zmc2V0VG9wXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGFkZCB0aGUgY29udGVudCBvZiB0aGUgd29yZCBub2RlICsgYSBzcGFjZVxuICAgICAgICAgICAgdG1wICs9IHdvcmQuaW5uZXJUZXh0ICsgJyAnXG4gICAgICAgIH0pXG4gICAgICAgIC8vIGNsb3NlIHRoZSBsYXN0IGxpbmVcbiAgICAgICAgdG1wICs9ICc8L3NwYW4+J1xuXG4gICAgICAgIC8vIHJlbW92ZSB0aGUgY29udGVudCBvZiB0aGUgY29uYXRpbmVyLCBhbmQgcmVwbGFjZSBpdCB3aXRoIHRoZSB3cmFwcGVkIGxpbmVzXG4gICAgICAgICRjb250YWluZXIuaW5uZXJIVE1MID0gdG1wXG4gICAgfSxcbn1cbiIsImltcG9ydCB7IFR3ZWVuTWF4IH0gZnJvbSAnZ3NhcC9Ud2Vlbk1heCdcbmltcG9ydCB7IEFuaUNvbmZpZyB9IGZyb20gJy4vQW5pQ29uZmlnJ1xuaW1wb3J0IHsgSGVscGVycyB9IGZyb20gJy4vSGVscGVycydcblxuY2xhc3MgQW5pRWxlbWVudCB7XG4gICAgY29uc3RydWN0b3IoZWwsIGluZGV4LCBwcmVzZXQsIGNvbXBsZXRlSGFuZGxlcikge1xuICAgICAgICB0aGlzLmVsID0gZWxcbiAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4XG4gICAgICAgIHRoaXMuY29tcGxldGVIYW5kbGVyID0gY29tcGxldGVIYW5kbGVyXG4gICAgICAgIHRoaXMuZGVsYXlTcGVlZCA9IEFuaUNvbmZpZy5kZWxheVNwZWVkXG4gICAgICAgIGlmIChIZWxwZXJzLmhhc0F0dHJpYnV0ZSh0aGlzLmVsLCAnYW5pLWRlbGF5LXNwZWVkJykpIHtcbiAgICAgICAgICAgIHRoaXMuZGVsYXlTcGVlZCA9IHBhcnNlRmxvYXQoSGVscGVycy5nZXRBdHRyaWJ1dGUodGhpcy5lbCwgJ2FuaS1kZWxheS1zcGVlZCcpKVxuICAgICAgICB9XG4gICAgICAgIHRoaXMubW92ZW1lbnQgPSBBbmlDb25maWcubW92ZURpc3RhbmNlXG4gICAgICAgIGlmIChIZWxwZXJzLmhhc0F0dHJpYnV0ZSh0aGlzLmVsLCAnYW5pLW1vdmUtZGlzdGFuY2UnKSkge1xuICAgICAgICAgICAgdGhpcy5tb3ZlbWVudCA9IHBhcnNlRmxvYXQoSGVscGVycy5nZXRBdHRyaWJ1dGUodGhpcy5lbCwgJ2FuaS1tb3ZlLWRpc3RhbmNlJykpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy56b29tU2NhbGUgPSBBbmlDb25maWcuem9vbVNjYWxlXG4gICAgICAgIGlmIChIZWxwZXJzLmhhc0F0dHJpYnV0ZSh0aGlzLmVsLCAnYW5pLXpvb20tc2NhbGUnKSkge1xuICAgICAgICAgICAgdGhpcy56b29tU2NhbGUgPSBwYXJzZUZsb2F0KEhlbHBlcnMuZ2V0QXR0cmlidXRlKHRoaXMuZWwsICdhbmktem9vbS1zY2FsZScpKVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3BlZWQgPSBBbmlDb25maWcuc3BlZWRcbiAgICAgICAgaWYgKEhlbHBlcnMuaGFzQXR0cmlidXRlKHRoaXMuZWwsICdhbmktc3BlZWQnKSkge1xuICAgICAgICAgICAgdGhpcy5zcGVlZCA9IHBhcnNlRmxvYXQoSGVscGVycy5nZXRBdHRyaWJ1dGUodGhpcy5lbCwgJ2FuaS1zcGVlZCcpKVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuZWFzZSA9IHdpbmRvdy5FYXNlTG9va3VwLmZpbmQoQW5pQ29uZmlnLmVhc2UpXG4gICAgICAgIGlmIChIZWxwZXJzLmhhc0F0dHJpYnV0ZSh0aGlzLmVsLCAnYW5pLWVhc2UnKSkge1xuICAgICAgICAgICAgY29uc3QgZWFzZSA9IHdpbmRvdy5FYXNlTG9va3VwLmZpbmQoSGVscGVycy5nZXRBdHRyaWJ1dGUodGhpcy5lbCwgJ2FuaS1lYXNlJykpXG4gICAgICAgICAgICBpZiAoZWFzZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWFzZSA9IGVhc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRleHRMaW5lRGVsYXlTcGVlZCA9IEFuaUNvbmZpZy50ZXh0TGluZURlbGF5U3BlZWRcbiAgICAgICAgaWYgKEhlbHBlcnMuaGFzQXR0cmlidXRlKHRoaXMuZWwsICdhbmktdGV4dC1saW5lLWRlbGF5LXNwZWVkJykpIHtcbiAgICAgICAgICAgIHRoaXMudGV4dExpbmVEZWxheVNwZWVkID0gcGFyc2VGbG9hdChBbmlDb25maWcudGV4dExpbmVEZWxheVNwZWVkKVxuICAgICAgICB9XG4gICAgICAgIHRoaXMudGV4dExpbmVZT2Zmc2V0ID0gQW5pQ29uZmlnLnRleHRMaW5lWU9mZnNldFxuICAgICAgICBpZiAoSGVscGVycy5oYXNBdHRyaWJ1dGUodGhpcy5lbCwgJ2FuaS10ZXh0LWxpbmUteS1vZmZzZXQnKSkge1xuICAgICAgICAgICAgdGhpcy50ZXh0TGluZVlPZmZzZXQgPSBwYXJzZUZsb2F0KEFuaUNvbmZpZy50ZXh0TGluZVlPZmZzZXQpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByZXNldCAmJiB0eXBlb2YgcHJlc2V0ID09PSAnc3RyaW5nJyAmJiBwcmVzZXQgIT09ICcnKSB7XG4gICAgICAgICAgICB0aGlzLnByZXNldCA9IHByZXNldFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wcmVzZXQgPSAnZmFkZSdcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFwcGVhcigpIHtcbiAgICAgICAgY29uc3QgbW90aW9ucyA9IHRoaXMucHJlc2V0LnNwbGl0KCctJylcbiAgICAgICAgY29uc3QgbW90aW9uTmFtZSA9IG1vdGlvbnMuc2hpZnQoKVxuICAgICAgICBjb25zdCBvcHRpb24gPSBtb3Rpb25zLmpvaW4oJy0nKVxuICAgICAgICBpZiAobW90aW9uTmFtZSA9PT0gJ3dpcGUnKSB7XG4gICAgICAgICAgICB0aGlzLndpcGUob3B0aW9uKVxuICAgICAgICB9IGVsc2UgaWYgKG1vdGlvbk5hbWUgPT09ICd6b29tJykge1xuICAgICAgICAgICAgdGhpcy56b29tKG9wdGlvbilcbiAgICAgICAgfSBlbHNlIGlmIChtb3Rpb25OYW1lID09PSAnY2xhc3MnICYmIG9wdGlvbikge1xuICAgICAgICAgICAgdGhpcy5hZGRDbGFzcyhvcHRpb24pXG4gICAgICAgIH0gZWxzZSBpZiAobW90aW9uTmFtZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICB0aGlzLnRleHQob3B0aW9uKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5mYWRlKG9wdGlvbilcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZhZGUoZGlyZWN0aW9uKSB7XG4gICAgICAgIGxldCBzdGFydFByb3BzID0geyB4OiAwLCB5OiAwLCBvcGFjaXR5OiAwIH1cbiAgICAgICAgaWYgKHR5cGVvZiBkaXJlY3Rpb24gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGRpcmVjdGlvbikge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2xlZnQnOlxuICAgICAgICAgICAgICAgICAgICBzdGFydFByb3BzLnggPSB0aGlzLm1vdmVtZW50XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgY2FzZSAncmlnaHQnOlxuICAgICAgICAgICAgICAgICAgICBzdGFydFByb3BzLnggPSAtdGhpcy5tb3ZlbWVudFxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGNhc2UgJ2Rvd24nOlxuICAgICAgICAgICAgICAgICAgICBzdGFydFByb3BzLnkgPSAtdGhpcy5tb3ZlbWVudFxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGNhc2UgJ3VwJzpcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRQcm9wcy55ID0gdGhpcy5tb3ZlbWVudFxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0UHJvcHMueSA9IDBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBUd2Vlbk1heC5mcm9tVG8odGhpcy5lbCwgdGhpcy5zcGVlZCwgc3RhcnRQcm9wcywge1xuICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgICB4OiAwLFxuICAgICAgICAgICAgZWFzZTogdGhpcy5lYXNlLFxuICAgICAgICAgICAgZGVsYXk6IHRoaXMuaW5kZXggKiB0aGlzLmRlbGF5U3BlZWQsXG4gICAgICAgICAgICBvbkNvbXBsZXRlOiB0aGlzLmNvbXBsZXRlSGFuZGxlcixcbiAgICAgICAgICAgIGNsZWFyUHJvcHM6ICd4LHksb3BhY2l0eScsXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgd2lwZShkaXJlY3Rpb24gPSAnbGVmdCcpIHtcbiAgICAgICAgbGV0IHN0YXJ0UHJvcHMgPSB0aGlzLmNsaXBQYXRoKDEwMClcbiAgICAgICAgbGV0IGVuZFByb3BzID0gdGhpcy5jbGlwUGF0aCgwKVxuICAgICAgICBzd2l0Y2ggKGRpcmVjdGlvbikge1xuICAgICAgICAgICAgY2FzZSAndXAnOlxuICAgICAgICAgICAgICAgIHN0YXJ0UHJvcHMgPSB0aGlzLmNsaXBQYXRoKDUwMCwgMCwgMCwgMClcbiAgICAgICAgICAgICAgICBlbmRQcm9wcyA9IHRoaXMuY2xpcFBhdGgoMCwgMCwgMCwgMClcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAnZG93bic6XG4gICAgICAgICAgICAgICAgc3RhcnRQcm9wcyA9IHRoaXMuY2xpcFBhdGgoMCwgMCwgNTAwLCAwKVxuICAgICAgICAgICAgICAgIGVuZFByb3BzID0gdGhpcy5jbGlwUGF0aCgwLCAwLCAwLCAwKVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlICdsZWZ0JzpcbiAgICAgICAgICAgICAgICBzdGFydFByb3BzID0gdGhpcy5jbGlwUGF0aCgwLCAwLCAwLCA1MDApXG4gICAgICAgICAgICAgICAgZW5kUHJvcHMgPSB0aGlzLmNsaXBQYXRoKDAsIDAsIDAsIDApXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgJ3JpZ2h0JzpcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgc3RhcnRQcm9wcyA9IHRoaXMuY2xpcFBhdGgoMCwgNTAwLCAwKVxuICAgICAgICAgICAgICAgIGVuZFByb3BzID0gdGhpcy5jbGlwUGF0aCgwLCAwLCAwKVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgICAgZW5kUHJvcHMuZGVsYXkgPSB0aGlzLmluZGV4ICogdGhpcy5kZWxheVNwZWVkXG4gICAgICAgIGVuZFByb3BzLmVhc2UgPSB0aGlzLmVhc2VcbiAgICAgICAgZW5kUHJvcHMub25Db21wbGV0ZSA9IHRoaXMuY29tcGxldGVIYW5kbGVyXG4gICAgICAgIFR3ZWVuTWF4LmZyb21Ubyh0aGlzLmVsLCB0aGlzLnNwZWVkLCBzdGFydFByb3BzLCBlbmRQcm9wcylcbiAgICB9XG5cbiAgICB6b29tKGRpcmVjdGlvbiA9ICdpbicpIHtcbiAgICAgICAgY29uc3Qgd3JhcHBlciA9IHRoaXMuZWwucGFyZW50RWxlbWVudFxuXG4gICAgICAgIHdyYXBwZXIuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJ1xuICAgICAgICBpZiAoZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmVsLCBudWxsKS5kaXNwbGF5ID09PSAnaW5saW5lJykge1xuICAgICAgICAgICAgd3JhcHBlci5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jaydcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHdyYXBwZXIuc3R5bGUuZGlzcGxheSA9IGdldENvbXB1dGVkU3R5bGUodGhpcy5lbCwgbnVsbCkuZGlzcGxheVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ291dCcpIHtcbiAgICAgICAgICAgIFR3ZWVuTWF4LmZyb21UbyhcbiAgICAgICAgICAgICAgICB0aGlzLmVsLFxuICAgICAgICAgICAgICAgIHRoaXMuc3BlZWQsXG4gICAgICAgICAgICAgICAgeyBvcGFjaXR5OiAwLCBzY2FsZTogMSB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IHRoaXMuem9vbVNjYWxlLFxuICAgICAgICAgICAgICAgICAgICBkZWxheTogdGhpcy5pbmRleCAqIHRoaXMuZGVsYXlTcGVlZCxcbiAgICAgICAgICAgICAgICAgICAgb25Db21wbGV0ZTogdGhpcy5jb21wbGV0ZUhhbmRsZXIsXG4gICAgICAgICAgICAgICAgICAgIGVhc2U6IHRoaXMuZWFzZSxcbiAgICAgICAgICAgICAgICAgICAgLy8gTmVlZCB0byBrZWVwIHNjYWxlXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyUHJvcHM6ICdvcGFjaXR5JyxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBUd2Vlbk1heC5mcm9tVG8oXG4gICAgICAgICAgICAgICAgdGhpcy5lbCxcbiAgICAgICAgICAgICAgICB0aGlzLnNwZWVkLFxuICAgICAgICAgICAgICAgIHsgb3BhY2l0eTogMCwgc2NhbGU6IHRoaXMuem9vbVNjYWxlIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgICAgICAgICBzY2FsZTogMSxcbiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IHRoaXMuaW5kZXggKiB0aGlzLmRlbGF5U3BlZWQsXG4gICAgICAgICAgICAgICAgICAgIG9uQ29tcGxldGU6IHRoaXMuY29tcGxldGVIYW5kbGVyLFxuICAgICAgICAgICAgICAgICAgICBlYXNlOiB0aGlzLmVhc2UsXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyUHJvcHM6ICdvcGFjaXR5LCBzY2FsZScsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgdGV4dChvcHRpb24pIHtcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxDb250ZW50ID0gdGhpcy5lbC5pbm5lckhUTUxcbiAgICAgICAgSGVscGVycy53cmFwTGluZXModGhpcy5lbClcbiAgICAgICAgY29uc3QgbGluZXMgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5hbmktbGluZScpXG4gICAgICAgIGNvbnN0IHNwZWVkID0gdGhpcy5zcGVlZCAvIGxpbmVzLmxlbmd0aCArIDFcbiAgICAgICAgY29uc3Qgc3RhcnRpbmdEZWxheSA9IHRoaXMuaW5kZXggKiB0aGlzLmRlbGF5U3BlZWRcbiAgICAgICAgbGluZXMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGxldCBzdGFydGluZ09wYWNpdHkgPSAwXG4gICAgICAgICAgICBjb25zdCAkZ3JvdXAgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy5hbmktbGluZS1ncm91cCcpXG4gICAgICAgICAgICBpdGVtLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgICAgICAgICBpZiAob3B0aW9uID09PSAnbGluZS1tYXNrJykge1xuICAgICAgICAgICAgICAgIGl0ZW0uc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJ1xuICAgICAgICAgICAgICAgIHN0YXJ0aW5nT3BhY2l0eSA9IDFcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRncm91cC5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jaydcbiAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRlID0gKGkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaSA9PT0gbGluZXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsLmlubmVySFRNTCA9IG9yaWdpbmFsQ29udGVudFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBsZXRlSGFuZGxlcigpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgVHdlZW5NYXguZnJvbVRvKFxuICAgICAgICAgICAgICAgICRncm91cCxcbiAgICAgICAgICAgICAgICBzcGVlZCxcbiAgICAgICAgICAgICAgICB7IHk6ICRncm91cC5vZmZzZXRIZWlnaHQgKyB0aGlzLnRleHRMaW5lWU9mZnNldCwgb3BhY2l0eTogc3RhcnRpbmdPcGFjaXR5IH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgICAgICAgICB5OiAwLFxuICAgICAgICAgICAgICAgICAgICB4OiAwLFxuICAgICAgICAgICAgICAgICAgICBlYXNlOiB0aGlzLmVhc2UsXG4gICAgICAgICAgICAgICAgICAgIGRlbGF5OiBzdGFydGluZ0RlbGF5ICsgaW5kZXggKiB0aGlzLnRleHRMaW5lRGVsYXlTcGVlZCxcbiAgICAgICAgICAgICAgICAgICAgb25Db21wbGV0ZTogY29tcGxldGUsXG4gICAgICAgICAgICAgICAgICAgIG9uQ29tcGxldGVQYXJhbXM6IFtpbmRleF0sXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyUHJvcHM6ICdhbGwnLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBjbGlwUGF0aCh0b3AgPSAwLCByaWdodCA9IDAsIGJvdHRvbSA9IDAsIGxlZnQgPSAwKSB7XG4gICAgICAgIGNvbnN0IHBhdGhzID0ge1xuICAgICAgICAgICAgY2xpcFBhdGg6IGBpbnNldCgke3RvcH0lICR7cmlnaHR9JSAke2JvdHRvbX0lICR7bGVmdH0lKWAsXG4gICAgICAgICAgICAvLyBUT0RPOiBtYWtlIHVwL2Rvd24gd29yayBpbiBzYWZhcmlcbiAgICAgICAgICAgIHdlYmtpdENsaXBQYXRoOiBgaW5zZXQoJHt0b3B9JSAke3JpZ2h0fSUgJHtib3R0b219JSAke2xlZnR9JSlgLFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXRoc1xuICAgIH1cblxuICAgIGFkZENsYXNzKG5hbWUpIHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmVsLmNsYXNzTGlzdC5hZGQobmFtZSlcbiAgICAgICAgICAgIHRoaXMuY29tcGxldGVIYW5kbGVyKClcbiAgICAgICAgfSwgdGhpcy5pbmRleCAqIHRoaXMuZGVsYXlTcGVlZClcbiAgICB9XG59XG5leHBvcnQgZGVmYXVsdCBBbmlFbGVtZW50XG4iLCJpbXBvcnQgQW5pRWxlbWVudCBmcm9tICcuL0FuaUVsZW1lbnQnXG5pbXBvcnQgeyBIZWxwZXJzIH0gZnJvbSAnLi9IZWxwZXJzJ1xuXG5leHBvcnQgY29uc3QgQW5pR3JvdXBBY3Rpb25zID0ge1xuICAgICdkZWZhdWx0LWFwcGVhcic6IChlbCkgPT4ge1xuICAgICAgICBlbC5zdHlsZS5vcGFjaXR5ID0gMVxuICAgIH0sXG59XG5cbkFuaUdyb3VwQWN0aW9uc1snYmFzaWMtYXBwZWFyJ10gPSAoZWwsIGNoaWxkcmVuKSA9PiB7XG4gICAgZWwuc3R5bGUub3BhY2l0eSA9IDFcbiAgICBlbC5zdHlsZS50cmFuc2l0aW9uID0gJ25vbmUnXG4gICAgZWwuY2xhc3NMaXN0LmFkZCgnYW5pLWhhcy1hcHBlYXJlZCcpXG4gICAgZWwuY2xhc3NMaXN0LmFkZCgnYW5pLXN0YXJ0JylcbiAgICBsZXQgY291bnQgPSAwXG4gICAgbGV0IGNvbXBsZXRlQ291bnQgPSAwXG4gICAgY29uc3Qgb25Db21wbGV0ZSA9ICgpID0+IHtcbiAgICAgICAgY29tcGxldGVDb3VudCsrXG4gICAgICAgIGlmIChjb21wbGV0ZUNvdW50ID09PSBjb3VudCkge1xuICAgICAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnYW5pLXN0YXJ0JylcbiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2FuaS1jb21wbGV0ZScpXG4gICAgICAgIH1cbiAgICB9XG4gICAgY2hpbGRyZW4uZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgbGV0IHByZXNldCA9ICcnXG4gICAgICAgIGNvdW50KytcbiAgICAgICAgaWYgKEhlbHBlcnMuaGFzQXR0cmlidXRlKGl0ZW0sICdhbmktcHJlc2V0JykpIHtcbiAgICAgICAgICAgIHByZXNldCA9IEhlbHBlcnMuZ2V0QXR0cmlidXRlKGl0ZW0sICdhbmktcHJlc2V0JylcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhbmkgPSBuZXcgQW5pRWxlbWVudChpdGVtLCBpbmRleCwgcHJlc2V0LCBvbkNvbXBsZXRlKVxuICAgICAgICBhbmkuYXBwZWFyKClcbiAgICB9KVxufVxuIiwiaW1wb3J0IHsgQW5pR3JvdXBBY3Rpb25zIH0gZnJvbSAnLi9BbmlHcm91cEFjdGlvbnMnXG5pbXBvcnQgeyBIZWxwZXJzIH0gZnJvbSAnLi9IZWxwZXJzJ1xuaW1wb3J0IHsgQW5pQ29uZmlnIH0gZnJvbSAnLi9BbmlDb25maWcnXG5cbmNsYXNzIEFuaW1hdGlvbkdyb3VwIHtcbiAgICBjb25zdHJ1Y3RvcihlbCkge1xuICAgICAgICB0aGlzLmVsID0gZWxcbiAgICAgICAgLy8gUmV2ZWFsIHdoZW4gYXQgdGhpcyBwZXJjZW50IG9mIHRoZSBzY3JlZW46XG4gICAgICAgIGlmIChIZWxwZXJzLmhhc0F0dHJpYnV0ZSh0aGlzLmVsLCAnYW5pLWluLXZpZXctdHJpZ2dlci1wZXJjZW50JykpIHtcbiAgICAgICAgICAgIHRoaXMub2Zmc2V0UGVyY2VudGFnZSA9IHBhcnNlRmxvYXQoSGVscGVycy5nZXRBdHRyaWJ1dGUodGhpcy5lbCwgJ2FuaS1pbi12aWV3LXRyaWdnZXItcGVyY2VudCcpKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5vZmZzZXRQZXJjZW50YWdlID0gQW5pQ29uZmlnLmluVmlld1RyaWdnZXJQZXJjZW50XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coeyBpblZpZXdUcmlnZ2VyUGVyY2VudDogQW5pQ29uZmlnLmluVmlld1RyaWdnZXJQZXJjZW50LCBvZmZzZXRQZXJjZW50YWdlOiB0aGlzLm9mZnNldFBlcmNlbnRhZ2UgfSlcbiAgICAgICAgY29uc3QgaW1hZ2VzID0gZWwucXVlcnlTZWxlY3RvckFsbCgnaW1nW2xvYWQtc3JjXSwgaW1nW2RhdGEtbG9hZC1zcmNdJylcbiAgICAgICAgdGhpcy5pbWFnZXMgPSBbLi4uaW1hZ2VzXS5maWx0ZXIoKGNoaWxkKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gY2hpbGQuY2xvc2VzdCgnW2FuaV0sIFtkYXRhLWFuaV0nKSA9PT0gdGhpcy5lbFxuICAgICAgICB9KVxuICAgICAgICB0aGlzLmltYWdlTG9hZGVkQ291bnQgPSAwXG4gICAgICAgIHRoaXMuaGFzQXBwZWFyZWQgPSBmYWxzZVxuXG4gICAgICAgIGNvbnN0IGNoaWxkcmVuID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yQWxsKCdbYW5pLWNoaWxkXSwgW2RhdGEtYW5pLWNoaWxkXScpXG5cbiAgICAgICAgY29uc3QgZmlsdGVyZWRDaGlsZHJlbiA9IFsuLi5jaGlsZHJlbl0uZmlsdGVyKChjaGlsZCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGNoaWxkLmNsb3Nlc3QoJ1thbmldLCBbZGF0YS1hbmldJykgPT09IHRoaXMuZWxcbiAgICAgICAgfSlcblxuICAgICAgICB0aGlzLmNoaWxkcmVuID0gZmlsdGVyZWRDaGlsZHJlblxuICAgICAgICB0aGlzLmNoaWxkcmVuLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBpZiAoSGVscGVycy5oYXNBdHRyaWJ1dGUoaXRlbSwgJ2FuaS1jaGlsZC1vcmRlcicpKSB7XG4gICAgICAgICAgICAgICAgaXRlbS5vcmRlciA9IHBhcnNlSW50KEhlbHBlcnMuZ2V0QXR0cmlidXRlKGl0ZW0sICdhbmktY2hpbGQtb3JkZXInKSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaXRlbS5vcmRlciA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoICsgaW5kZXhcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy5jaGlsZHJlbi5zb3J0KChhLCBiKSA9PiAoYS5vcmRlciA+IGIub3JkZXIgPyAxIDogLTEpKVxuICAgICAgICB0aGlzLm9uQXBwZWFyID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbC5jbGFzc0xpc3QuYWRkKCdhcHBlYXInKVxuICAgICAgICB9XG4gICAgICAgIGlmIChIZWxwZXJzLmhhc0F0dHJpYnV0ZShlbCwgJ2FuaScpKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIEFuaUdyb3VwQWN0aW9uc1tIZWxwZXJzLmdldEF0dHJpYnV0ZShlbCwgJ2FuaScpXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIHRoaXMub25BcHBlYXIgPSBBbmlHcm91cEFjdGlvbnNbSGVscGVycy5nZXRBdHRyaWJ1dGUoZWwsICdhbmknKV1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNoZWNrKCkge1xuICAgICAgICBpZiAodGhpcy5pc0luVmlld3BvcnQodGhpcy5lbCwgd2luZG93LmlubmVySGVpZ2h0KSkge1xuICAgICAgICAgICAgdGhpcy5sb2FkQXNzZXRzKClcbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhdGhpcy5oYXNBcHBlYXJlZCAmJlxuICAgICAgICAgICAgdGhpcy5pbWFnZUxvYWRlZENvdW50ID09PSB0aGlzLmltYWdlcy5sZW5ndGggJiZcbiAgICAgICAgICAgIHRoaXMuaXNJblZpZXdwb3J0KHRoaXMuZWwsIHdpbmRvdy5pbm5lckhlaWdodCAqIC10aGlzLm9mZnNldFBlcmNlbnRhZ2UpXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5hcHBlYXIoKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXBwZWFyKCkge1xuICAgICAgICB0aGlzLmhhc0FwcGVhcmVkID0gdHJ1ZVxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMub25BcHBlYXIodGhpcy5lbCwgdGhpcy5jaGlsZHJlbilcbiAgICAgICAgfSwgQW5pQ29uZmlnLmluaXRpYWxEZWxheSAqIDEwMDApXG4gICAgfVxuXG4gICAgaXNJblZpZXdwb3J0KGVsZW0sIHBhZGRpbmcgPSAwKSB7XG4gICAgICAgIC8vIElmIGF0IHRoZSBib3R0b20gb2YgdGhlIHBhZ2U6XG4gICAgICAgIGlmICh3aW5kb3cuaW5uZXJIZWlnaHQgKyB3aW5kb3cuc2Nyb2xsWSA+PSBkb2N1bWVudC5ib2R5Lm9mZnNldEhlaWdodCkge1xuICAgICAgICAgICAgLy8gUmVtb3ZlIHBhZGRpbmcgaW4gY2FzZSBhbiBlbCBpcyBuZWFyIHRoZSBib3R0b21cbiAgICAgICAgICAgIHBhZGRpbmcgPSAwXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYm91bmRpbmcgPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgICAgIHJldHVybiBib3VuZGluZy50b3AgLSBwYWRkaW5nIDwgKHdpbmRvdy5pbm5lckhlaWdodCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KVxuICAgIH1cblxuICAgIGltYWdlTG9hZEhhbmRsZXIoKSB7XG4gICAgICAgIHRoaXMuaW1hZ2VMb2FkZWRDb3VudCsrXG4gICAgICAgIC8vIFdhbnQgdG8gY2hlY2sgYWdhaW4gaW4gY2FzZSB1c2VyIGhhc24ndCBzY3JvbGxlZFxuICAgICAgICAvLyB3aGlsZSB0aGUgaW1hZ2UgZmluaXNoZXMgbG9hZGluZ1xuICAgICAgICB0aGlzLmNoZWNrKClcbiAgICB9XG5cbiAgICBsb2FkQXNzZXRzKCkge1xuICAgICAgICB0aGlzLmltYWdlcy5mb3JFYWNoKChpbWcpID0+IHtcbiAgICAgICAgICAgIGlmIChIZWxwZXJzLmhhc0F0dHJpYnV0ZShpbWcsICdsb2FkLXNyYycpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3JjID0gSGVscGVycy5nZXRBdHRyaWJ1dGUoaW1nLCAnbG9hZC1zcmMnKVxuICAgICAgICAgICAgICAgIGltZy5yZW1vdmVBdHRyaWJ1dGUoJ2xvYWQtc3JjJylcbiAgICAgICAgICAgICAgICBpbWcucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWxvYWQtc3JjJylcbiAgICAgICAgICAgICAgICBpbWcuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIHRoaXMuaW1hZ2VMb2FkSGFuZGxlci5iaW5kKHRoaXMpKVxuICAgICAgICAgICAgICAgIGltZy5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIHRoaXMuaW1hZ2VMb2FkSGFuZGxlci5iaW5kKHRoaXMpKVxuICAgICAgICAgICAgICAgIGltZy5zZXRBdHRyaWJ1dGUoJ3NyYycsIHNyYylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG59XG5leHBvcnQgZGVmYXVsdCBBbmltYXRpb25Hcm91cFxuIiwiaW1wb3J0IEFuaW1hdGlvbkdyb3VwIGZyb20gJy4vQW5pbWF0aW9uR3JvdXAnXG5cbmNsYXNzIEFuaSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuZ3JvdXBzID0gW11cbiAgICAgICAgdGhpcy51cGRhdGUoKVxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jaGVjaygpXG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMuY2hlY2soKVxuICAgIH1cblxuICAgIGNoZWNrKCkge1xuICAgICAgICB0aGlzLmdyb3Vwcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgICAgICBpdGVtLmNoZWNrKClcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIHRoaXMuZWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2FuaV06bm90KFtkYXRhLWFuaS1hZGRlZF0pLCBbZGF0YS1hbmldOm5vdChbZGF0YS1hbmktYWRkZWRdKScpXG4gICAgICAgIHRoaXMuZWxzLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGl0ZW0uc2V0QXR0cmlidXRlKCdkYXRhLWFuaS1hZGRlZCcsIHRydWUpXG4gICAgICAgICAgICB0aGlzLmdyb3Vwcy5wdXNoKG5ldyBBbmltYXRpb25Hcm91cChpdGVtKSlcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy5jaGVjaygpXG4gICAgfVxufVxuZXhwb3J0IGRlZmF1bHQgQW5pXG4iLCJpbXBvcnQgJ0BiYWJlbC9wb2x5ZmlsbC9ub0NvbmZsaWN0J1xuaW1wb3J0IHBvbHlmaWxsIGZyb20gJ2VsZW1lbnQtY2xvc2VzdCdcblxuaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBpZiAod2luZG93Lk5vZGVMaXN0ICYmICFOb2RlTGlzdC5wcm90b3R5cGUuZm9yRWFjaCkge1xuICAgICAgICBOb2RlTGlzdC5wcm90b3R5cGUuZm9yRWFjaCA9IEFycmF5LnByb3RvdHlwZS5mb3JFYWNoXG4gICAgfVxuICAgIHBvbHlmaWxsKHdpbmRvdylcbn1cblxuaW1wb3J0IEFuaSBmcm9tICcuL21vZHVsZXMvQW5pLmpzJ1xuaW1wb3J0IEFuaUVsZW1lbnQgZnJvbSAnLi9tb2R1bGVzL0FuaUVsZW1lbnQuanMnXG5pbXBvcnQgQW5pbWF0aW9uR3JvdXAgZnJvbSAnLi9tb2R1bGVzL0FuaW1hdGlvbkdyb3VwLmpzJ1xuaW1wb3J0IHsgSGVscGVycyB9IGZyb20gJy4vbW9kdWxlcy9IZWxwZXJzLmpzJ1xuaW1wb3J0IHsgQW5pR3JvdXBBY3Rpb25zIH0gZnJvbSAnLi9tb2R1bGVzL0FuaUdyb3VwQWN0aW9ucy5qcydcbmltcG9ydCB7IEFuaUNvbmZpZyB9IGZyb20gJy4vbW9kdWxlcy9BbmlDb25maWcuanMnXG5cbmV4cG9ydCB7IEFuaSwgQW5pQ29uZmlnLCBBbmlFbGVtZW50LCBBbmlHcm91cEFjdGlvbnMsIEFuaW1hdGlvbkdyb3VwLCBIZWxwZXJzIH1cbmNvbnNvbGUubG9nKCdhbmktZnJpZW5kIHYxLjAuNDAzNycpXG4iXSwic291cmNlUm9vdCI6IiJ9